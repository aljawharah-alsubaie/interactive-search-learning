<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tower of Hanoi | IT426</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{--bg:#0f1117;--surface:#1a1d27;--surface2:#22263a;--border:#2e3352;--accent:#a78bfa;--accent2:#6c63ff;--success:#10b981;--danger:#ef4444;--text:#e8eaf6;--text-dim:#8b90b8;--text-muted:#4a5080;}
*{margin:0;padding:0;box-sizing:border-box;}button{color:inherit;font-family:inherit;}
body{background:var(--bg);color:var(--text);font-family:'Space Grotesk',sans-serif;min-height:100vh;overflow-x:hidden;}
nav{background:var(--surface);border-bottom:1px solid var(--border);padding:13px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;}
nav a{color:var(--accent);text-decoration:none;font-size:14px;font-weight:500;}nav a:hover{opacity:.7;}
.nav-badge{background:var(--surface2);border:1px solid var(--border);padding:4px 12px;border-radius:20px;font-size:12px;color:var(--text-muted);}
.hero{text-align:center;padding:32px 24px 24px;background:radial-gradient(ellipse 80% 60% at 50% 0%,rgba(167,139,250,.12) 0%,transparent 70%);}
.hero-tag{display:inline-block;background:rgba(167,139,250,.12);border:1px solid rgba(167,139,250,.4);color:var(--accent);padding:4px 14px;border-radius:20px;font-size:12px;font-weight:600;letter-spacing:.05em;text-transform:uppercase;margin-bottom:16px;}
.hero h1{font-size:clamp(24px,4vw,44px);font-weight:700;background:linear-gradient(135deg,#fff 40%,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:10px;}
.hero p{color:var(--text-dim);font-size:15px;max-width:500px;margin:0 auto;}
.steps-bar{display:flex;align-items:center;justify-content:center;padding:16px 12px;max-width:700px;margin:0 auto;overflow-x:auto;}
.step{display:flex;flex-direction:column;align-items:center;gap:6px;flex:1;}
.sc{width:38px;height:38px;border-radius:50%;border:2px solid var(--border);background:var(--surface);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;color:var(--text-muted);transition:all .4s;z-index:2;position:relative;}
.sc.active{border-color:var(--accent);background:var(--accent);color:#fff;box-shadow:0 0 16px rgba(167,139,250,.4);}
.sc.done{border-color:var(--success);background:var(--success);color:#fff;}
.sl{font-size:11px;color:var(--text-muted);font-weight:600;text-align:center;white-space:nowrap;transition:color .4s;}
.sl.active{color:var(--accent);}.sl.done{color:var(--success);}
.sline{flex:1;height:2px;background:var(--border);margin-top:-20px;margin-bottom:20px;z-index:1;transition:background .4s;}
.sline.done{background:var(--success);}
.section{max-width:1000px;margin:0 auto;padding:0 24px 80px;display:none;}
.section.visible{display:block;animation:fadeUp .5s ease;}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);}}
.sec-title{font-size:22px;font-weight:700;margin-bottom:6px;}
.sec-sub{color:var(--text-dim);font-size:14px;margin-bottom:24px;}
.card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:24px;overflow:hidden;}
.card-sm{background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:14px;}

/* HANOI GAME */
.hanoi-layout{display:grid;grid-template-columns:1fr 280px;gap:24px;align-items:start;}
@media(max-width:700px){.hanoi-layout{grid-template-columns:1fr;}}
.hanoi-stage{background:var(--bg);border:1px solid var(--border);border-radius:14px;padding:20px;user-select:none;}
.pegs-row{display:flex;gap:0;justify-content:space-around;align-items:flex-end;height:240px;position:relative;}
.peg-wrap{display:flex;flex-direction:column;align-items:center;flex:1;position:relative;}
.peg-label{font-size:12px;font-weight:700;color:var(--text-muted);margin-bottom:8px;font-family:'JetBrains Mono',monospace;}
.peg-disks{display:flex;flex-direction:column-reverse;align-items:center;gap:4px;min-height:170px;justify-content:flex-start;padding-bottom:4px;position:relative;z-index:2;}
.peg-pole{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:8px;height:180px;background:var(--border);border-radius:4px;}
.peg-base{height:10px;background:var(--border);border-radius:5px;width:90%;margin-top:4px;}
.disk{height:28px;border-radius:6px;cursor:pointer;transition:all .25s;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;font-family:'JetBrains Mono',monospace;color:rgba(255,255,255,.9);border:2px solid rgba(255,255,255,.15);box-shadow:0 2px 8px rgba(0,0,0,.3);}
.disk:hover{filter:brightness(1.3);transform:scaleY(1.1);}
.disk.selected{box-shadow:0 0 0 3px #fff, 0 0 20px rgba(167,139,250,.6);transform:translateY(-6px) scale(1.05);}
.peg-wrap.drop-target{background:rgba(167,139,250,.05);border-radius:8px;}
.peg-wrap.drop-target:hover{background:rgba(167,139,250,.12);}
.peg-wrap.invalid-target{background:rgba(239,68,68,.05);}

/* Disk colors */
.disk-1{background:linear-gradient(135deg,#f472b6,#e879f9);}
.disk-2{background:linear-gradient(135deg,#a78bfa,#818cf8);}
.disk-3{background:linear-gradient(135deg,#60a5fa,#38bdf8);}
.disk-4{background:linear-gradient(135deg,#34d399,#10b981);}

/* Controls */
.hanoi-controls{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap;align-items:center;}
.stat-box{display:flex;gap:20px;align-items:center;}
.stat{text-align:center;}
.sv{font-size:28px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;}
.sl2{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.05em;font-weight:600;}
.diff-btns{display:flex;gap:6px;}
.diff-btn{padding:6px 14px;border-radius:8px;border:1px solid var(--border);background:var(--surface2);font-size:12px;font-weight:600;color:var(--text-dim);cursor:pointer;transition:all .2s;}
.diff-btn:hover{border-color:var(--accent);color:var(--accent);}
.diff-btn.active{background:rgba(167,139,250,.15);border-color:var(--accent);color:var(--accent);}

/* Code / state */
.code-block{background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:12px 14px;font-family:'JetBrains Mono',monospace;font-size:12px;color:#a78bfa;white-space:pre-wrap;word-break:break-word;line-height:1.7;overflow-x:auto;}
.code-comment{color:var(--text-muted);}
.state-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.08em;font-weight:700;margin-bottom:6px;}
.history-log{background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:10px;max-height:140px;overflow-y:auto;}
.h-entry{padding:4px 8px;border-radius:5px;font-size:12px;color:var(--text-dim);display:flex;gap:8px;margin-bottom:2px;}
.h-entry:nth-child(odd){background:rgba(255,255,255,.02);}
.h-num{color:var(--text-muted);font-family:'JetBrains Mono',monospace;font-size:10px;min-width:18px;}
.h-move{color:var(--accent);font-weight:700;font-size:11px;}

/* Goal banner */
.goal-banner{display:none;background:linear-gradient(135deg,rgba(16,185,129,.15),rgba(167,139,250,.1));border:1px solid var(--success);border-radius:14px;padding:20px;text-align:center;margin-top:14px;}
.goal-banner.show{display:block;animation:fadeUp .4s ease;}
.goal-banner h3{font-size:18px;color:var(--success);margin-bottom:8px;}
.goal-banner p{color:var(--text-dim);font-size:14px;margin-bottom:14px;}

/* QUESTIONS */
.qbox{background:linear-gradient(135deg,rgba(167,139,250,.07),rgba(108,99,255,.04));border:1px solid rgba(167,139,250,.25);border-radius:16px;padding:22px;margin-bottom:18px;}
.qt{font-size:17px;font-weight:600;margin-bottom:16px;color:var(--text);}
.options{display:flex;flex-direction:column;gap:9px;}
.option{background:var(--surface);border:2px solid var(--border);border-radius:12px;padding:13px 16px;cursor:pointer;transition:all .2s;display:flex;align-items:flex-start;gap:10px;font-size:14px;font-weight:500;text-align:left;width:100%;color:var(--text);}
.option:hover{border-color:var(--accent);background:rgba(167,139,250,.08);}
.option.correct-ans{border-color:var(--success);background:rgba(16,185,129,.1);color:var(--success);}
.option.wrong-ans{border-color:var(--danger);background:rgba(239,68,68,.07);color:var(--danger);}
.ol{background:var(--surface2);border-radius:6px;width:24px;height:24px;min-width:24px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:var(--text-dim);font-family:'JetBrains Mono',monospace;}
.option.correct-ans .ol{background:var(--success);color:#fff;}
.option.wrong-ans .ol{background:var(--danger);color:#fff;}
.feedback{display:none;border-radius:10px;padding:14px 16px;margin-top:14px;font-size:14px;line-height:1.6;}
.feedback.show{display:block;animation:fadeUp .3s ease;}
.feedback.correct{background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.3);color:#6ee7b7;}
.feedback.wrong{background:rgba(239,68,68,.07);border:1px solid rgba(239,68,68,.3);color:#fca5a5;}
.fb-t{font-weight:700;margin-bottom:6px;}
.expl{display:none;background:var(--surface2);border:1px solid var(--border);border-radius:14px;padding:18px;margin-top:16px;}
.expl.show{display:block;animation:fadeUp .4s ease;}
.expl h3{color:var(--accent);font-size:15px;margin-bottom:10px;}
.expl ul{list-style:none;display:flex;flex-direction:column;gap:7px;}
.expl li{display:flex;gap:8px;font-size:14px;color:var(--text-dim);}
.expl li::before{content:"‚Üí";color:var(--accent);font-weight:700;flex-shrink:0;}

/* FORMULATION */
.fcomp{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px;margin-bottom:14px;transition:border-color .3s;}
.fcomp.ok{border-color:var(--success);}.fcomp.bad{border-color:var(--danger);}
.ftitle{font-size:15px;font-weight:700;margin-bottom:5px;display:flex;align-items:center;gap:8px;color:var(--text);}
.fnum{background:var(--accent);color:#fff;width:26px;height:26px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;}
.fdesc{font-size:13px;color:var(--text-dim);margin-bottom:12px;}
.gfb{display:none;margin-top:8px;padding:9px 12px;border-radius:8px;font-size:13px;font-weight:500;}
.gfb.show{display:block;}
.gfb.ok{background:rgba(16,185,129,.12);color:#6ee7b7;border:1px solid rgba(16,185,129,.3);}
.gfb.bad{background:rgba(239,68,68,.08);color:#fca5a5;border:1px solid rgba(239,68,68,.25);}
.score-card{text-align:center;padding:36px 20px;background:linear-gradient(135deg,rgba(167,139,250,.1),rgba(108,99,255,.08));border:1px solid rgba(167,139,250,.3);border-radius:20px;}
.score-big{font-size:68px;font-weight:700;font-family:'JetBrains Mono',monospace;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.score-lbl{color:var(--text-dim);font-size:15px;margin-bottom:24px;}
.sbd{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;max-width:600px;margin:0 auto 20px;}
.si{background:var(--surface2);border-radius:10px;padding:10px 6px;font-size:12px;color:var(--text-dim);border:1px solid var(--border);text-align:center;}
.si.ok{border-color:var(--success);color:var(--success);}
.si.bad{border-color:var(--danger);color:var(--danger);}
.si-icon{font-size:18px;margin-bottom:3px;}
.comp-card{text-align:center;padding:50px 20px;background:linear-gradient(135deg,rgba(16,185,129,.1),rgba(167,139,250,.08));border:1px solid var(--success);border-radius:20px;}
.comp-card h2{font-size:30px;font-weight:700;margin-bottom:10px;}
.comp-card p{color:var(--text-dim);margin-bottom:24px;}
.badges{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;margin-bottom:24px;}
.badge{background:var(--surface2);border:1px solid var(--border);padding:10px 14px;border-radius:10px;font-size:13px;color:var(--accent);font-weight:600;}
.btn{padding:10px 20px;border-radius:10px;border:none;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:6px;}
.btn-p{background:var(--accent);color:#fff;}.btn-p:hover{background:#9061f9;transform:translateY(-1px);}
.btn-g{background:var(--surface2);color:var(--text-dim);border:1px solid var(--border);}.btn-g:hover{background:var(--border);color:var(--text);}
.btn-f{width:100%;justify-content:center;}
::-webkit-scrollbar{width:6px;}::-webkit-scrollbar-track{background:var(--surface);}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px;}

  /* ‚îÄ‚îÄ RESPONSIVE FIXES ‚îÄ‚îÄ */
  @media(max-width:768px){
    nav{padding:12px 16px;}
    nav .nav-badge:last-child{display:none;}
    .hero{padding:36px 16px 24px;}
    .hero p{font-size:14px;}
    .steps-bar{padding:16px 12px;overflow-x:auto;}
    .step-label, .sl{font-size:10px;}
    .section{padding:0 16px 60px;}
    .card{padding:16px;}
    .card-sm{padding:12px;}
    /* Fix two-column layouts */
    .map-layout, .vw-layout, .hanoi-layout, .maze-layout, .tsp-layout{
      grid-template-columns:1fr !important;
    }
    /* Fix state space grid overflow */
    .states-grid{grid-template-columns:repeat(2,1fr);}
    /* Fix score breakdown */
    .score-breakdown, .sbd{grid-template-columns:repeat(3,1fr);}
    /* Fix canvas overflow */
    #tsp-canvas{width:100% !important;height:auto !important;}
    #maze-canvas{width:100% !important;height:auto !important;}
    #romania-svg, #romania-svg-2{height:320px;}
    /* Fix hanoi pegs */
    .pegs-row{gap:0;overflow-x:auto;}
    .disk{font-size:10px;}
    /* Fix action grid */
    .action-grid{grid-template-columns:repeat(3,1fr);}
    /* Fix dpad */
    .dpad{grid-template-columns:repeat(3,40px);grid-template-rows:repeat(3,40px);}
    .dpad-btn{width:40px;height:40px;font-size:16px;}
    /* Fix 3-col compare grids */
    #paths-comparison, #routes-grid{grid-template-columns:1fr !important;}
    #from-state-picker{grid-template-columns:repeat(4,1fr);}
    /* Hero gradient fix for mobile */
    .hero-tag{font-size:10px;padding:3px 10px;}
    /* Formulation */
    .form-components, #fcomps{gap:12px;}
  }
  @media(max-width:480px){
    .hero h1{font-size:22px;}
    .section-title, .sec-title{font-size:18px;}
    .score-big, .score-big{font-size:52px;}
    .states-grid{grid-template-columns:repeat(2,1fr);}
    #paths-comparison, #routes-grid{grid-template-columns:1fr !important;}
  }


  @media(max-width:640px){
    nav{padding:11px 14px;}
    .hero h1{font-size:22px !important;}
    .hero p{font-size:13px;}
    .hero-tag{font-size:10px;padding:3px 10px;}
    .steps-bar{padding:12px 6px;overflow-x:auto;}
    .sc,.step-circle{width:32px !important;height:32px !important;font-size:11px !important;}
    .step-label,.sl{font-size:9px !important;}
    .sline,.step-line{margin-top:-16px !important;margin-bottom:16px !important;}
    .section{padding:0 12px 50px !important;}
    .sec-title,.section-title{font-size:17px !important;}
    .sec-sub,.section-subtitle{font-size:12px !important;}
    .card{padding:14px !important;}
    .card-sm{padding:10px !important;}
    .qbox,.question-box{padding:14px !important;}
    .qt,.question-text{font-size:14px !important;}
    .option{padding:10px 12px !important;font-size:13px !important;}
    .score-big,.score-big{font-size:52px !important;}
    .sbd,.score-breakdown{grid-template-columns:repeat(3,1fr) !important;}
    .hanoi-layout,.maze-layout,.tsp-layout{grid-template-columns:1fr !important;}
    #tsp-canvas{max-width:100% !important;}
    #maze-canvas{max-width:100% !important;}
    .pegs-row{overflow-x:auto;}
    .disk{font-size:10px !important;}
    .diff-btns{flex-wrap:wrap;}
    .hanoi-controls{flex-wrap:wrap;gap:8px;}
  }
</style>
</head>
<body>
<nav>
  <a href="index.html">‚Üê Back to Exercises</a>
  <div style="display:flex;gap:8px;"><span class="nav-badge">IT426 ¬∑ AI Systems</span><span class="nav-badge">KSU</span></div>
</nav>
<div class="hero">
  <div class="hero-tag">Exercise 04 ¬∑ Recursive States</div>
  <h1>Tower of Hanoi üóº</h1>
  <p>Move all disks to peg C ‚Äî learn recursive state spaces and the minimum move constraint</p>
</div>
<div class="steps-bar">
  <div class="step"><div class="sc active" id="sc1">1</div><div class="sl active" id="sl1">Play</div></div>
  <div class="sline" id="sln1"></div>
  <div class="step"><div class="sc" id="sc2">2</div><div class="sl" id="sl2">Count States</div></div>
  <div class="sline" id="sln2"></div>
  <div class="step"><div class="sc" id="sc3">3</div><div class="sl" id="sl3">Min Moves</div></div>
  <div class="sline" id="sln3"></div>
  <div class="step"><div class="sc" id="sc4">4</div><div class="sl" id="sl4">Formulate</div></div>
</div>

<!-- SEC 1: PLAY -->
<section class="section visible" id="sec1">
  <div class="sec-title">Step 1: Play the Tower of Hanoi üóº</div>
  <div class="sec-sub">Move ALL disks from peg A to peg C. Rules: only one disk at a time, never place a larger disk on a smaller one.</div>
  <div class="card">
    <div class="hanoi-layout">
      <div>
        <!-- Difficulty selector -->
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:16px;">
          <span style="font-size:13px;color:var(--text-muted);font-weight:600;">Disks:</span>
          <div class="diff-btns">
            <button class="diff-btn active" onclick="setDisks(2)" id="d2">2</button>
            <button class="diff-btn" onclick="setDisks(3)" id="d3">3</button>
            <button class="diff-btn" onclick="setDisks(4)" id="d4">4</button>
          </div>
        </div>
        <div class="hanoi-stage">
          <div class="pegs-row" id="pegs-row"><!-- generated --></div>
        </div>
        <div style="margin-top:14px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;">
          <div class="stat-box">
            <div class="stat"><div class="sv" id="move-count">0</div><div class="sl2">Moves</div></div>
            <div style="width:1px;height:36px;background:var(--border);"></div>
            <div class="stat"><div class="sv" id="min-moves">‚Äî</div><div class="sl2">Optimal</div></div>
          </div>
          <div style="display:flex;gap:8px;">
            <button class="btn btn-g" onclick="hanoi.reset()">üîÑ Reset</button>
            <button class="btn btn-g" onclick="hanoi.undo()">‚Ü© Undo</button>
          </div>
        </div>
        <div style="margin-top:10px;font-size:13px;color:var(--text-muted);" id="hanoi-hint">Click a disk to select it, then click the destination peg.</div>
        <div class="goal-banner" id="goal-banner">
          <h3>üéâ Solved!</h3>
          <p id="goal-msg">You did it!</p>
          <button class="btn btn-p" onclick="goTo(2)">Continue ‚Üí</button>
        </div>
      </div>
      <!-- State panel -->
      <div style="display:flex;flex-direction:column;gap:12px;">
        <div class="card-sm">
          <div class="state-label">Current State</div>
          <div class="code-block" id="state-code"><span class="code-comment">// (peg_A, peg_B, peg_C)
// top disk listed first</span>
A: []
B: []
C: []</div>
        </div>
        <div class="card-sm">
          <div class="state-label">Move History</div>
          <div class="history-log" id="move-log"><div style="color:var(--text-muted);font-size:12px;padding:4px 8px;">No moves yet‚Ä¶</div></div>
        </div>
      </div>
    </div>
  </div>
  <div style="margin-top:14px;text-align:center;">
    <button class="btn btn-g" onclick="goTo(2)" style="font-size:12px;opacity:.6;">Skip ‚Üí</button>
  </div>
</section>

<!-- SEC 2: COUNT STATES -->
<section class="section" id="sec2">
  <div class="sec-title">Step 2: How Many States? üî¢</div>
  <div class="sec-sub">Each disk can be on any of 3 pegs, independently. Let's figure out the total number of states.</div>
  <div class="card" style="margin-bottom:24px;">
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;text-align:center;margin-bottom:20px;">
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:20px;">
        <div style="font-size:36px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">2</div>
        <div style="font-size:13px;color:var(--text-dim);margin-top:4px;">disks ‚Üí 9 states</div>
        <div style="font-size:11px;color:var(--text-muted);">3¬≤ = 9</div>
      </div>
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:20px;">
        <div style="font-size:36px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">3</div>
        <div style="font-size:13px;color:var(--text-dim);margin-top:4px;">disks ‚Üí 27 states</div>
        <div style="font-size:11px;color:var(--text-muted);">3¬≥ = 27</div>
      </div>
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:20px;">
        <div style="font-size:36px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">n</div>
        <div style="font-size:13px;color:var(--text-dim);margin-top:4px;">disks ‚Üí 3‚Åø states</div>
        <div style="font-size:11px;color:var(--text-muted);">exponential growth</div>
      </div>
    </div>
  </div>
  <div class="qbox">
    <div class="qt">‚ùì Why does each disk independently contribute a factor of 3 to the total states?</div>
    <div class="options" id="q2-opts">
      <button class="option" onclick="qSel('q2',this,'wrong')"><span class="ol">A</span><div>Because there are 3 disks in a standard Tower of Hanoi</div></button>
      <button class="option" onclick="qSel('q2',this,'correct')"><span class="ol">B</span><div>Because each disk can be on peg A, B, or C ‚Äî 3 independent choices</div></button>
      <button class="option" onclick="qSel('q2',this,'wrong')"><span class="ol">C</span><div>Because you need 3 moves to move each disk</div></button>
    </div>
    <div class="feedback" id="q2-fb"></div>
  </div>
  <div class="expl" id="q2-expl">
    <h3>‚úÖ Each disk = independent factor of 3</h3>
    <ul>
      <li>Disk 1 can be on peg A, B, or C ‚Üí <strong>3 options</strong></li>
      <li>Disk 2 can also be on A, B, or C ‚Üí another <strong>3 options</strong></li>
      <li>Total = 3 √ó 3 √ó ‚Ä¶ = <strong>3‚Åø states</strong> for n disks</li>
      <li>This is why the state space grows <strong>exponentially</strong></li>
    </ul>
    <div style="margin-top:14px;"><button class="btn btn-p" onclick="goTo(3)">Continue to Min Moves ‚Üí</button></div>
  </div>
</section>

<!-- SEC 3: MIN MOVES -->
<section class="section" id="sec3">
  <div class="sec-title">Step 3: Minimum Moves ‚Äî The Optimal Path üéØ</div>
  <div class="sec-sub">The optimal solution for n disks always takes exactly 2‚Åø ‚àí 1 moves. See why!</div>
  <div class="card" style="margin-bottom:24px;">
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px;text-align:center;">
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:16px;">
        <div style="font-size:13px;color:var(--text-muted);margin-bottom:6px;">1 disk</div>
        <div style="font-size:32px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">1</div>
        <div style="font-size:11px;color:var(--text-muted);">2¬π‚àí1 = 1 move</div>
      </div>
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:16px;">
        <div style="font-size:13px;color:var(--text-muted);margin-bottom:6px;">2 disks</div>
        <div style="font-size:32px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">3</div>
        <div style="font-size:11px;color:var(--text-muted);">2¬≤‚àí1 = 3 moves</div>
      </div>
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:16px;">
        <div style="font-size:13px;color:var(--text-muted);margin-bottom:6px;">3 disks</div>
        <div style="font-size:32px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">7</div>
        <div style="font-size:11px;color:var(--text-muted);">2¬≥‚àí1 = 7 moves</div>
      </div>
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:16px;">
        <div style="font-size:13px;color:var(--text-muted);margin-bottom:6px;">4 disks</div>
        <div style="font-size:32px;font-weight:700;color:var(--accent);font-family:'JetBrains Mono',monospace;">15</div>
        <div style="font-size:11px;color:var(--text-muted);">2‚Å¥‚àí1 = 15 moves</div>
      </div>
    </div>
  </div>
  <div class="qbox">
    <div class="qt">‚ùì For 3 disks, what is the MINIMUM number of moves to solve Tower of Hanoi?</div>
    <div class="options" id="q3-opts">
      <button class="option" onclick="qSel('q3',this,'wrong')"><span class="ol">A</span><div>6 moves</div></button>
      <button class="option" onclick="qSel('q3',this,'correct')"><span class="ol">B</span><div>7 moves (2¬≥ ‚àí 1 = 7)</div></button>
      <button class="option" onclick="qSel('q3',this,'wrong')"><span class="ol">C</span><div>9 moves</div></button>
      <button class="option" onclick="qSel('q3',this,'wrong')"><span class="ol">D</span><div>27 moves</div></button>
    </div>
    <div class="feedback" id="q3-fb"></div>
  </div>
  <div class="expl" id="q3-expl">
    <h3>‚úÖ 7 moves is optimal for 3 disks</h3>
    <ul>
      <li>Formula: <strong>2‚Åø ‚àí 1 moves</strong> for n disks</li>
      <li>The solution is <strong>recursive</strong>: move top (n‚àí1) disks to peg B, move largest to C, move (n‚àí1) disks from B to C</li>
      <li>No search algorithm can do better ‚Äî this IS the optimal path cost</li>
    </ul>
    <div style="margin-top:14px;"><button class="btn btn-p" onclick="goTo(4)">Continue to Formulation ‚Üí</button></div>
  </div>
</section>

<!-- SEC 4: FORMULATE -->
<section class="section" id="sec4">
  <div class="sec-title">Step 4: Test Your Understanding üìù</div>
  <div class="sec-sub">Define all five components for the Tower of Hanoi with 3 disks.</div>
  <div id="fcomps">
    <div class="fcomp" id="fc1"><div class="ftitle"><div class="fnum">1</div>State Representation</div><div class="fdesc">How do we describe a configuration of the Tower of Hanoi?</div>
      <div class="options" id="fc1-o">
        <button class="option" onclick="fSel('fc1',this,'correct')"><span class="ol">A</span><div>A tuple of 3 lists: (peg_A, peg_B, peg_C) ‚Äî each list contains disk sizes from bottom to top</div></button>
        <button class="option" onclick="fSel('fc1',this,'wrong')"><span class="ol">B</span><div>The number of moves made so far</div></button>
        <button class="option" onclick="fSel('fc1',this,'wrong')"><span class="ol">C</span><div>Only which peg has the most disks</div></button>
      </div><div class="gfb" id="fc1-fb"></div>
    </div>
    <div class="fcomp" id="fc2"><div class="ftitle"><div class="fnum">2</div>Initial State</div><div class="fdesc">What is the starting configuration?</div>
      <div class="options" id="fc2-o">
        <button class="option" onclick="fSel('fc2',this,'wrong')"><span class="ol">A</span><div>All disks on peg C: ([],[],[3,2,1])</div></button>
        <button class="option" onclick="fSel('fc2',this,'correct')"><span class="ol">B</span><div>All disks on peg A: ([3,2,1],[],[])</div></button>
        <button class="option" onclick="fSel('fc2',this,'wrong')"><span class="ol">C</span><div>Disks distributed evenly across all pegs</div></button>
      </div><div class="gfb" id="fc2-fb"></div>
    </div>
    <div class="fcomp" id="fc3"><div class="ftitle"><div class="fnum">3</div>Actions</div><div class="fdesc">What moves are allowed?</div>
      <div class="options" id="fc3-o">
        <button class="option" onclick="fSel('fc3',this,'wrong')"><span class="ol">A</span><div>Move any disk to any peg</div></button>
        <button class="option" onclick="fSel('fc3',this,'correct')"><span class="ol">B</span><div>Move the TOP disk of any peg to another peg, only if the destination is empty or has a larger top disk</div></button>
        <button class="option" onclick="fSel('fc3',this,'wrong')"><span class="ol">C</span><div>Move any two disks simultaneously</div></button>
      </div><div class="gfb" id="fc3-fb"></div>
    </div>
    <div class="fcomp" id="fc4"><div class="ftitle"><div class="fnum">4</div>Goal Test</div><div class="fdesc">When is the puzzle solved?</div>
      <div class="options" id="fc4-o">
        <button class="option" onclick="fSel('fc4',this,'wrong')"><span class="ol">A</span><div>When peg A is empty</div></button>
        <button class="option" onclick="fSel('fc4',this,'correct')"><span class="ol">B</span><div>When all disks are on peg C in correct order: ([],[],[3,2,1])</div></button>
        <button class="option" onclick="fSel('fc4',this,'wrong')"><span class="ol">C</span><div>When the number of moves equals 2‚Åø‚àí1</div></button>
      </div><div class="gfb" id="fc4-fb"></div>
    </div>
    <div class="fcomp" id="fc5"><div class="ftitle"><div class="fnum">5</div>Path Cost</div><div class="fdesc">How do we measure solution quality?</div>
      <div class="options" id="fc5-o">
        <button class="option" onclick="fSel('fc5',this,'correct')"><span class="ol">A</span><div>Number of moves (each move costs 1) ‚Äî optimal = 2‚Åø‚àí1 moves</div></button>
        <button class="option" onclick="fSel('fc5',this,'wrong')"><span class="ol">B</span><div>Size of the disk moved (bigger disk = higher cost)</div></button>
        <button class="option" onclick="fSel('fc5',this,'wrong')"><span class="ol">C</span><div>Time taken to solve</div></button>
      </div><div class="gfb" id="fc5-fb"></div>
    </div>
  </div>
  <button class="btn btn-p btn-f" onclick="grade()" style="margin-top:20px;font-size:16px;padding:14px;">‚úÖ Submit Answers</button>
  <div id="score-sec" style="display:none;margin-top:24px;animation:fadeUp .5s ease;">
    <div class="score-card">
      <div class="score-big" id="spct">‚Äî</div>
      <div class="score-lbl" id="smsg">‚Äî</div>
      <div class="sbd" id="sbd"></div>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
        <button class="btn btn-g" id="retry-btn" onclick="retry()" style="display:none;">‚Ü∫ Try Again</button>
        <button class="btn btn-p" id="comp-btn" onclick="goTo(5)" style="display:none;">Complete üéâ</button>
      </div>
    </div>
  </div>
</section>

<!-- SEC 5 -->
<section class="section" id="sec5">
  <div class="comp-card">
    <div style="font-size:72px;margin-bottom:20px;">üóº</div>
    <h2>Module Complete!</h2>
    <p>You've mastered the Tower of Hanoi problem formulation</p>
    <div class="badges">
      <div class="badge">‚úì Solved the Puzzle</div>
      <div class="badge">‚úì State Space = 3‚Åø</div>
      <div class="badge">‚úì Optimal = 2‚Åø‚àí1</div>
      <div class="badge">‚úì Problem Formulated</div>
    </div>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
      <button class="btn btn-g" onclick="location.reload()">‚Ü∫ Start Over</button>
      <a href="index.html" class="btn btn-p" style="text-decoration:none;">‚Üê All Exercises</a>
    </div>
  </div>
</section>

<script>
// ‚îÄ‚îÄ HANOI GAME ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const DISK_COLORS = ['disk-1','disk-2','disk-3','disk-4'];
const hanoi = (() => {
  let pegs = [[],[],[]]; // pegs[0]=A, pegs[1]=B, pegs[2]=C
  let numDisks = 2;
  let moves = 0;
  let selected = null; // {pegIdx}
  let history = [];
  let moveLog = [];

  function setN(n) {
    numDisks = n;
    document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(`d${n}`)?.classList.add('active');
    reset();
  }

  function reset() {
    pegs = [[], [], []];
    for (let i = numDisks; i >= 1; i--) pegs[0].push(i);
    moves = 0; selected = null; history = []; moveLog = [];
    document.getElementById('move-count').textContent = 0;
    document.getElementById('min-moves').textContent = Math.pow(2, numDisks) - 1;
    document.getElementById('goal-banner').classList.remove('show');
    document.getElementById('hanoi-hint').textContent = 'Click a disk to select it, then click the destination peg.';
    render();
  }

  function render() {
    const row = document.getElementById('pegs-row');
    row.innerHTML = '';
    ['A','B','C'].forEach((label, pi) => {
      const wrap = document.createElement('div');
      wrap.className = 'peg-wrap';
      if (selected !== null && selected !== pi) wrap.classList.add('drop-target');

      const pegLabel = document.createElement('div');
      pegLabel.className = 'peg-label';
      pegLabel.textContent = `Peg ${label}`;
      wrap.appendChild(pegLabel);

      const diskArea = document.createElement('div');
      diskArea.className = 'peg-disks';

      pegs[pi].forEach((size, di) => {
        const disk = document.createElement('div');
        disk.className = `disk ${DISK_COLORS[size-1]}`;
        const w = 40 + size * 28;
        disk.style.width = `${w}px`;
        disk.textContent = size;
        // only top disk is clickable
        if (di === pegs[pi].length - 1) {
          if (selected === pi) disk.classList.add('selected');
          disk.addEventListener('click', (e) => { e.stopPropagation(); clickDisk(pi); });
        }
        diskArea.appendChild(disk);
      });
      wrap.appendChild(diskArea);

      const pole = document.createElement('div'); pole.className = 'peg-pole';
      const base = document.createElement('div'); base.className = 'peg-base';
      wrap.appendChild(pole);
      wrap.appendChild(base);

      wrap.addEventListener('click', () => clickPeg(pi));
      row.appendChild(wrap);
    });

    // Update state code
    const labels = ['A','B','C'];
    document.getElementById('state-code').innerHTML =
      `<span class="code-comment">// (peg_A, peg_B, peg_C)\n// larger number = bigger disk</span>\n` +
      pegs.map((p,i) => `${labels[i]}: [${[...p].reverse().join(', ')}]`).join('\n');

    // History log
    const log = document.getElementById('move-log');
    if (moveLog.length === 0) {
      log.innerHTML = '<div style="color:var(--text-muted);font-size:12px;padding:4px 8px;">No moves yet‚Ä¶</div>';
    } else {
      log.innerHTML = moveLog.slice(-6).reverse().map(m =>
        `<div class="h-entry"><span class="h-num">${m.num}</span><span class="h-move">Disk ${m.disk}</span><span style="color:var(--text-dim)">Peg ${m.from} ‚Üí Peg ${m.to}</span></div>`
      ).join('');
    }
  }

  function clickDisk(pegIdx) {
    if (selected === pegIdx) { selected = null; render(); return; }
    if (selected !== null) { moveDisk(selected, pegIdx); return; }
    selected = pegIdx;
    render();
    document.getElementById('hanoi-hint').textContent = `Disk ${pegs[pegIdx][pegs[pegIdx].length-1]} selected ‚Äî click destination peg`;
  }

  function clickPeg(pegIdx) {
    if (selected === null) return;
    if (selected === pegIdx) { selected = null; render(); return; }
    moveDisk(selected, pegIdx);
  }

  function moveDisk(from, to) {
    if (pegs[from].length === 0) { selected = null; render(); return; }
    const disk = pegs[from][pegs[from].length - 1];
    if (pegs[to].length > 0 && pegs[to][pegs[to].length - 1] < disk) {
      document.getElementById('hanoi-hint').textContent = `‚ùå Cannot place disk ${disk} on smaller disk ${pegs[to][pegs[to].length-1]}`;
      selected = null; render(); return;
    }
    history.push(JSON.parse(JSON.stringify(pegs)));
    pegs[from].pop();
    pegs[to].push(disk);
    moves++;
    const labels = ['A','B','C'];
    moveLog.push({num:moves, disk, from:labels[from], to:labels[to]});
    document.getElementById('move-count').textContent = moves;
    selected = null;
    render();
    document.getElementById('hanoi-hint').textContent = `‚úì Moved disk ${disk} to peg ${labels[to]}`;
    checkGoal();
  }

  function checkGoal() {
    if (pegs[2].length === numDisks) {
      const optimal = Math.pow(2, numDisks) - 1;
      const banner = document.getElementById('goal-banner');
      banner.classList.add('show');
      const isOpt = moves === optimal;
      document.getElementById('goal-msg').textContent =
        `Solved in ${moves} moves! ${isOpt ? `üèÜ That's optimal (2^${numDisks}‚àí1 = ${optimal})!` : `Optimal is ${optimal} moves ‚Äî try again for a perfect score!`}`;
    }
  }

  function undo() {
    if (history.length === 0) return;
    pegs = history.pop();
    moves = Math.max(0, moves - 1);
    document.getElementById('move-count').textContent = moves;
    moveLog.pop();
    selected = null;
    render();
  }

  return { reset, undo, setN };
})();

function setDisks(n) { hanoi.setN(n); }

// ‚îÄ‚îÄ Q&A ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function qSel(qid, btn, result) {
  document.getElementById(`${qid}-opts`).querySelectorAll('.option').forEach(o=>o.classList.remove('correct-ans','wrong-ans'));
  const fb = document.getElementById(`${qid}-fb`);
  if (result === 'correct') {
    btn.classList.add('correct-ans');
    fb.className = 'feedback show correct';
    fb.innerHTML = '<div class="fb-t">‚úÖ Correct!</div>';
    document.getElementById(`${qid}-expl`)?.classList.add('show');
    document.getElementById(`${qid}-opts`).querySelectorAll('.option').forEach(o=>o.disabled=true);
  } else {
    btn.classList.add('wrong-ans');
    fb.className = 'feedback show wrong';
    fb.innerHTML = '<div class="fb-t">‚ùå Not quite ‚Äî think about it again.</div>';
  }
}

// ‚îÄ‚îÄ FORMULATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const fa = {fc1:null,fc2:null,fc3:null,fc4:null,fc5:null};
const ff = {
  fc1:{correct:"‚úÖ A tuple of 3 lists captures exactly where every disk is.",wrong:"‚ùå The state needs to capture ALL disk positions ‚Äî which peg each disk is on."},
  fc2:{correct:"‚úÖ Initial state: all disks stacked on peg A ([3,2,1],[],[]).",wrong:"‚ùå We start with all disks on peg A, largest at bottom."},
  fc3:{correct:"‚úÖ Only the top disk can move, and only onto a larger (or absent) disk.",wrong:"‚ùå The constraint is: move the TOP disk only, never onto a smaller disk."},
  fc4:{correct:"‚úÖ Goal is all disks on peg C in order ‚Äî ([],[],[3,2,1]).",wrong:"‚ùå The goal is specifically all disks on peg C in the correct order."},
  fc5:{correct:"‚úÖ Each move costs 1 ‚Äî optimal is 2‚Åø‚àí1 total moves.",wrong:"‚ùå Standard cost is 1 per move regardless of which disk."}
};
function fSel(fc, btn, result) {
  document.getElementById(`${fc}-o`).querySelectorAll('.option').forEach(o=>o.classList.remove('correct-ans','wrong-ans'));
  btn.classList.add(result==='correct'?'correct-ans':'wrong-ans');
  fa[fc] = result;
}
function grade() {
  let correct = 0;
  const names = ['State Rep','Initial State','Actions','Goal Test','Path Cost'];
  const sbd = document.getElementById('sbd'); sbd.innerHTML = '';
  ['fc1','fc2','fc3','fc4','fc5'].forEach((fc,i) => {
    const ok = fa[fc]==='correct'; if(ok) correct++;
    const comp=document.getElementById(fc),fb=document.getElementById(`${fc}-fb`);
    comp.classList.toggle('ok',ok); comp.classList.toggle('bad',!ok);
    fb.className=`gfb show ${ok?'ok':'bad'}`;
    fb.textContent = fa[fc]===null?'‚ö†Ô∏è No answer selected.':ff[fc][ok?'correct':'wrong'];
    document.getElementById(`${fc}-o`).querySelectorAll('.option.correct-ans,.option.wrong-ans').forEach(o=>{
      const was = o.classList.contains('correct-ans') ? 'correct-ans':'wrong-ans';
      o.classList.remove('correct-ans','wrong-ans'); o.classList.add(was);
    });
    sbd.innerHTML += `<div class="si ${ok?'ok':'bad'}"><div class="si-icon">${ok?'‚úÖ':'‚ùå'}</div><div>${names[i]}</div></div>`;
  });
  const pct = Math.round(correct/5*100);
  document.getElementById('spct').textContent = `${pct}%`;
  document.getElementById('smsg').textContent = pct===100?'üèÜ Perfect!':pct>=80?'üéâ Excellent!':'üí™ Review and retry';
  document.getElementById('score-sec').style.display='block';
  document.getElementById('score-sec').scrollIntoView({behavior:'smooth'});
  document.getElementById(pct>=80?'comp-btn':'retry-btn').style.display='inline-flex';
}
function retry() {
  Object.keys(fa).forEach(k=>fa[k]=null);
  ['fc1','fc2','fc3','fc4','fc5'].forEach(fc=>{
    document.getElementById(fc).classList.remove('ok','bad');
    document.getElementById(`${fc}-fb`).className='gfb';
    document.getElementById(`${fc}-o`).querySelectorAll('.option').forEach(o=>o.classList.remove('correct-ans','wrong-ans'));
  });
  document.getElementById('score-sec').style.display='none';
  document.getElementById('retry-btn').style.display='none';
  document.getElementById('comp-btn').style.display='none';
  window.scrollTo({top:0,behavior:'smooth'});
}

// ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function goTo(n) {
  for(let i=1;i<=5;i++) document.getElementById(`sec${i}`)?.classList.remove('visible');
  document.getElementById(`sec${n}`)?.classList.add('visible');
  window.scrollTo({top:0,behavior:'smooth'});
  for(let i=1;i<=4;i++){
    const c=document.getElementById(`sc${i}`),l=document.getElementById(`sl${i}`),ln=document.getElementById(`sln${i}`);
    c.className='sc';l.className='sl';if(ln)ln.className='sline';
    if(i<n){c.classList.add('done');c.textContent='‚úì';l.classList.add('done');if(ln)ln.classList.add('done');}
    else if(i===n){c.classList.add('active');c.textContent=i;l.classList.add('active');}
    else{c.textContent=i;}
  }
}

hanoi.setN(2);
</script>
</body>
</html>